(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{174:function(e,t,n){e.exports=n(354)},353:function(e,t,n){},354:function(e,t,n){"use strict";n.r(t);var a,r=n(1),c=n.n(r),u=n(7),o=n(44),s=n(62),i=n(161),l=n(22),E=n(15),d=n(86),p=n.n(d),m={users:[],total:0,loading:!1,error:!1,pageSize:4},f=(a={},Object(l.a)(a,"FETCH_USERS_REQUEST",function(e){return Object(E.a)({},e,{loading:!0,error:!1})}),Object(l.a)(a,"FETCH_USERS_SUCCESS",function(e,t){var n=t.users;return Object(E.a)({},e,{users:n.map(function(e){return Object(E.a)({},e,{key:p()()})}),loading:!1,error:!1})}),Object(l.a)(a,"FETCH_USERS_FAILURE",function(e){return Object(E.a)({},e,{loading:!1,error:!0})}),Object(l.a)(a,"GET_TOTAL_REQUEST",function(e){return Object(E.a)({},e,{loading:!0,error:!1})}),Object(l.a)(a,"GET_TOTAL_SUCCESS",function(e,t){var n=t.total;return Object(E.a)({},e,{total:n,loading:!1,error:!1})}),Object(l.a)(a,"GET_TOTAL_FAILURE",function(e){return Object(E.a)({},e,{loading:!1,error:!0})}),Object(l.a)(a,"ADD_NEW_USER_REQUEST",function(e){return Object(E.a)({},e,{loading:!0,error:!1})}),Object(l.a)(a,"ADD_NEW_USER_SUCCESS",function(e){return Object(E.a)({},e,{loading:!1,error:!1})}),Object(l.a)(a,"ADD_NEW_USER_FAILURE",function(e){return Object(E.a)({},e,{loading:!1,error:!0})}),Object(l.a)(a,"UPDATE_USER_REQUEST",function(e){return Object(E.a)({},e,{loading:!0,error:!1})}),Object(l.a)(a,"UPDATE_USER_SUCCESS",function(e){return Object(E.a)({},e,{loading:!1,error:!1})}),Object(l.a)(a,"UPDATE_USER_FAILURE",function(e){return Object(E.a)({},e,{loading:!1,error:!0})}),Object(l.a)(a,"DELETE_USER_REQUEST",function(e){return Object(E.a)({},e,{loading:!0,error:!1})}),Object(l.a)(a,"DELETE_USER_SUCCESS",function(e){return Object(E.a)({},e,{loading:!1,error:!1})}),Object(l.a)(a,"DELETE_USER_FAILURE",function(e){return Object(E.a)({},e,{loading:!1,error:!0})}),a),b=Object(s.d)(Object(s.c)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;return f[t.type]?f[t.type](e,t):e}}),Object(s.a)(i.a)),S=n(162),g=n(41),U=n(9),_=n(24),h=n(355),O=n(356),j=n(357),T=n(359),C=n(33),A=n.n(C),D=n(65),F=n(66),R=n.n(F),v=n(358),y=n(360),w=n(361),B={error:function(e){return w.a.error({message:"Error",description:"".concat(e)})},success:function(e){return w.a.success({message:"Success",description:"".concat(e)})}},I=v.a.create()(function(e){var t=e.form,n=e.addNewUser,a=e._getSubmitBtnRef,r=e._toggleModal,u=e._getData,o=t.getFieldDecorator,s={labelCol:{span:6},wrapperCol:{span:14}};return c.a.createElement(v.a,Object.assign({},s,{onSubmit:function(e){e.preventDefault(),t.validateFields(function(e,t){e||(t.key=p()(),n(t).then(function(e){e?(r(),u(),B.success("The user is CREATED!")):B.error("The user is NOT CREATED!")}).catch(function(e){return B.error(e)}))})}}),c.a.createElement(v.a.Item,Object.assign({},s,{label:"Name"}),o("name",{rules:[{required:!0,message:"Please input your name",type:"string"}]})(c.a.createElement(y.a,null))),c.a.createElement(v.a.Item,Object.assign({},s,{label:"Email"}),o("email",{rules:[{required:!0,message:"Please input valid email",type:"email"}]})(c.a.createElement(y.a,null))),c.a.createElement(v.a.Item,Object.assign({},s,{label:"Password"}),o("password",{rules:[{required:!0,message:"Please input your password"}]})(c.a.createElement(y.a.Password,null))),c.a.createElement(_.a,{htmlType:"submit",className:"hidden",ref:function(e){return a(e)}}))}),N={addNewUser:function(e){return function(){var t=Object(D.a)(A.a.mark(function t(n){var a;return A.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"ADD_NEW_USER_REQUEST"}),t.next=3,R.a.post("https://api.backendless.com/53FB6874-BEE0-9546-FFCA-1F3DEE56BE00/73E38E38-C5C9-45B2-FFB5-D05A6E16A600/data/Users",Object(E.a)({},e),{headers:{"Content-Type":"application/json"}}).then(function(){return n({type:"ADD_NEW_USER_SUCCESS"}),!0}).catch(function(){return n({type:"ADD_NEW_USER_FAILURE"}),!1});case 3:return a=t.sent,t.next=6,a;case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}},k=Object(o.b)(null,N)(I),L=v.a.create({mapPropsToFields:function(e){var t=e.record,n=t.name,a=t.email;return{name:v.a.createFormField(Object(E.a)({},n,{value:n})),email:v.a.createFormField(Object(E.a)({},a,{value:a}))}}})(function(e){var t=e.form,n=e.updateUser,a=e._getUpdateBtnRef,r=e._getData,u=e._toggleModal,o=e.record,s=t.getFieldDecorator,i={labelCol:{span:6},wrapperCol:{span:14}};return c.a.createElement(v.a,Object.assign({},i,{onSubmit:function(e){e.preventDefault(),t.validateFields(function(e,t){if(!e){var a=Object(E.a)({},o,t);n(a).then(function(e){e?(u(),r(),B.success("User is UPDATED!")):B.error("User is NOT UPDATED!")}).catch(function(e){return B.error(e)})}})}}),c.a.createElement(v.a.Item,Object.assign({},i,{label:"Name"}),s("name",{rules:[{required:!0,message:"Please input your name",type:"string"}]})(c.a.createElement(y.a,null))),c.a.createElement(v.a.Item,Object.assign({},i,{label:"Email"}),s("email",{rules:[{required:!0,message:"Please input valid email",type:"email"}]})(c.a.createElement(y.a,null))),c.a.createElement(v.a.Item,Object.assign({},i,{label:"Password"}),s("password",{rules:[{required:!0,message:"Please input your password"}]})(c.a.createElement(y.a.Password,null))),c.a.createElement(_.a,{htmlType:"submit",className:"hidden",ref:function(e){return a(e)}}))}),x=function(e){var t=e.record,n=e.updateUser,a=e._getUpdateBtnRef,r=e._getData,u=e._toggleModal;return c.a.createElement(L,{record:t,updateUser:n,_getUpdateBtnRef:a,_getData:r,_toggleModal:u})},P={updateUser:function(e){return function(){var t=Object(D.a)(A.a.mark(function t(n){var a,r,c,u,o;return A.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"UPDATE_USER_REQUEST"}),a=e.name,r=e.email,c=e.password,u=e.objectId,t.next=7,R.a.put("https://api.backendless.com/53FB6874-BEE0-9546-FFCA-1F3DEE56BE00/73E38E38-C5C9-45B2-FFB5-D05A6E16A600/data/Users/".concat(u),{name:a,email:r,password:c},{headers:{"Content-Type":"application/json"}}).then(function(){return n({type:"UPDATE_USER_SUCCESS"}),!0}).catch(function(){return n({type:"UPDATE_USER_FAILURE"}),!1});case 7:return o=t.sent,t.next=10,o;case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}},Q=Object(o.b)(function(e){return{error:e.users.error}},P)(x),z=function(e){var t=e.handleSearch,n=e.getData,a=e.dataIndex,u=Object(r.useState)({}),o=Object(g.a)(u,2),s=o[0],i=o[1];return c.a.createElement("div",{className:"search-container"},c.a.createElement("div",{className:"search-input-container"},c.a.createElement(y.a.Search,{placeholder:"Input search ".concat(a),onSearch:function(e){e&&t(a,e)},ref:function(e){return i(e)}})),c.a.createElement("div",null,c.a.createElement(_.a,{type:"primary",onClick:function(){var e=s.input.state.value;e&&t(a,e)},icon:"search",size:"small",className:"search-input-confirm-btn"},"Search"),c.a.createElement(_.a,{onClick:function(){s.input.state.value="",n()},size:"small",className:"search-input-reset-btn"},"Reset")))},q=function(e){var t=e.users,n=e.deleteUser,a=e.fetchUsers,u=e.getTotal,o=e.total,s=e.pageSize,i=e.loading,l=Object(r.useState)(!1),d=Object(g.a)(l,2),p=d[0],m=d[1],f=Object(r.useState)(!1),b=Object(g.a)(f,2),S=b[0],C=b[1],A=Object(r.useState)({}),D=Object(g.a)(A,2),F=D[0],R=D[1],v=Object(r.useState)({}),y=Object(g.a)(v,2),w=y[0],I=y[1],N=Object(r.useState)({}),L=Object(g.a)(N,2),x=L[0],P=L[1],q=Object(r.useState)(1),G=Object(g.a)(q,2),H=G[0],M=G[1],W=function(e,t){a(1,{name:"name"===e,phrase:t}).then(function(e){e||B.error("An error occured while fetching the users")}).catch(function(e){return B.error(e)})},J=function(e){return{filterDropdown:function(){return c.a.createElement(z,{handleSearch:W,getData:Y,dataIndex:e})},filterIcon:function(e){return c.a.createElement(U.a,{type:"search",style:{color:e?"#1890ff":void 0}})}}},K=[Object(E.a)({title:"Name",dataIndex:"name"},J("name")),Object(E.a)({title:"Email",dataIndex:"email"},J("email")),{title:"Actions",render:function(e,t){return c.a.createElement("span",null,c.a.createElement(_.a,{onClick:function(){P(t),C(!0),X()}},"Edit"),c.a.createElement(h.a,{type:"vertical"}),c.a.createElement(O.a,{title:"Are you sure delete this user?",onConfirm:function(){return V(t)},okText:"Yes",cancelText:"No"},c.a.createElement(_.a,{type:"danger"},"Del")))}}],X=function(){return m(!p)},Y=function(){u().then(function(e){e?a(H):B.error("An error occured while fetching the users quantity")}).catch(function(e){return B.error(e)})},V=function(e){n(e.objectId).then(function(e){e?(B.success("User is DELETED!"),Y()):B.error("An error occured while deleting the user")}).catch(function(e){return B.error(e)})};return Object(r.useEffect)(function(){Y()},[]),c.a.createElement("div",{className:"table"},c.a.createElement(j.a,{columns:K,dataSource:t,loading:i,pagination:{total:o,pageSize:s},onChange:function(e){var t=e.current;M(t),a(t)}}),c.a.createElement(_.a,{className:"flexed-centered",onClick:function(){C(!1),X()}},"Add New User"),c.a.createElement(T.a,{title:S?"Edit User":"Add User",visible:p,onCancel:X,footer:[c.a.createElement(_.a,{key:"back",onClick:X},"Cancel"),c.a.createElement(_.a,{key:"submit",type:"primary",loading:i,onClick:S?function(){return w.buttonNode.click()}:function(){return F.buttonNode.click()}},S?"Update":"Submit")]},S?c.a.createElement(Q,{_getUpdateBtnRef:function(e){return I(e)},_toggleModal:X,_getData:Y,record:x}):c.a.createElement(k,{_getSubmitBtnRef:function(e){return R(e)},_toggleModal:X,_getData:Y})))},G={deleteUser:function(e){return function(){var t=Object(D.a)(A.a.mark(function t(n){var a;return A.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"DELETE_USER_REQUEST"}),t.next=3,R.a.delete("https://api.backendless.com/53FB6874-BEE0-9546-FFCA-1F3DEE56BE00/73E38E38-C5C9-45B2-FFB5-D05A6E16A600/data/Users/".concat(e)).then(function(){return n({type:"DELETE_USER_SUCCESS"}),!0}).catch(function(){return n({type:"DELETE_USER_FAILURE"}),!1});case 3:return a=t.sent,t.next=6,a;case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},fetchUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return function(){var n=Object(D.a)(A.a.mark(function n(a,r){var c,u,o,s,i;return A.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:"FETCH_USERS_REQUEST"}),c=r(),u=c.users.pageSize,o=e<=1?0:u*(e-1),s=t?t.name?"name LIKE '%".concat(t.phrase,"%'"):"email LIKE '%".concat(t.phrase,"%'"):null,n.next=4,R.a.get("https://api.backendless.com/53FB6874-BEE0-9546-FFCA-1F3DEE56BE00/73E38E38-C5C9-45B2-FFB5-D05A6E16A600/data/Users",{params:{pageSize:u,offset:o,where:s}}).then(function(e){return a({type:"FETCH_USERS_SUCCESS",users:e.data}),t&&a({type:"GET_TOTAL_SUCCESS",total:e.data.length}),!0}).catch(function(){return a({type:"FETCH_USERS_FAILURE"}),!1});case 4:return i=n.sent,n.next=7,i;case 7:return n.abrupt("return",n.sent);case 8:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}()},getTotal:function(){return function(){var e=Object(D.a)(A.a.mark(function e(t){var n;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"GET_TOTAL_REQUEST"}),e.next=3,R.a.get("https://api.backendless.com/53FB6874-BEE0-9546-FFCA-1F3DEE56BE00/73E38E38-C5C9-45B2-FFB5-D05A6E16A600/data/Users/count").then(function(e){return t({type:"GET_TOTAL_SUCCESS",total:e.data}),!0}).catch(function(){return t({type:"GET_TOTAL_FAILURE"}),!1});case 3:return n=e.sent,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}},H=Object(o.b)(function(e){var t=e.users,n=t.users,a=t.total,r=t.loading;return{users:n,total:a,pageSize:t.pageSize,loading:r}},G)(q),M=function(){return c.a.createElement("div",{className:"wrapper"},c.a.createElement(H,null))},W=(n(353),function(){return c.a.createElement("div",{className:"App"},c.a.createElement(S.Helmet,null,c.a.createElement("meta",{charSet:"utf-8"}),c.a.createElement("title",null,"PERX")),c.a.createElement(M,null))});Object(u.render)(c.a.createElement(o.a,{store:b},c.a.createElement(W,null)),document.getElementById("root"))}},[[174,1,2]]]);
//# sourceMappingURL=main.8426a199.chunk.js.map